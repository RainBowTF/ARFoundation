<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308626 (ko-KR, MWS); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="897"/>

<div><span><div><div><ul><li><div>들어가기전에...</div></li></ul><div>해당 튜토리얼은  <a href="https://docs.unity3d.com/Packages/com.unity.xr.arfoundation%402.1/manual/index.html">https://docs.unity3d.com/Packages/com.unity.xr.arfoundation@2.1/manual/index.html</a> 페이지를 참조하여 작성되었다.</div><div>실행한 Unity 환경은 2019.1.10.f1 버전, AR Foundation 버전은 2.1.1 이다.</div><div>AR Foundation 1.0 버전과 2.0 버전은 차이점이 조금 존재하므로 왠만하면 2.0 버전을 사용하도록 한다.</div><div>다만 현재 튜토리얼 자료가 없어 AR Foundation 2.1 Sample을 보고 분석한 점을 아래와 같이 작성한다. </div><div><br/></div><ul><li><div>계획</div></li></ul><div>이 예제에서 우리는 핸드폰 카메라로 이미지를 탐색하고,</div><div>이미지가 탐색되면 이미지에 대한 간단한 소개를 슬라이드 형식으로 보여주려고 한다.</div><div><img src="ARFoundationTutorial_files/Image.png" type="image/png" data-filename="Image.png" width="1114"/><br/></div><div><br/></div><ul><li><div>먼저 Unity에서 3d 프로젝트를 하나 만든다</div></li></ul><div><br/></div><ol><li><div><span style="font-weight: bold;">프로젝트 세팅</span></div></li></ol><div>ar foundation을 적용하기 위해서는 옵션 설정이 필요하다. 안드로이드 기준으로 설명한다.</div><div>1-1. Edit &gt; ProjectSettings &gt; Player &gt; Android  </div><ul><li><div>Vulkan Library 제거 : ARCore에서 지원하지 않는다 제거하자</div></li></ul><div><img src="ARFoundationTutorial_files/Image [1].png" type="image/png" data-filename="Image.png" width="883"/><br/></div><ul><li><div>Multithread Rendering : 지원하지 않는다 체크해제</div></li></ul><div><img src="ARFoundationTutorial_files/Image [2].png" type="image/png" data-filename="Image.png" width="879"/><br/></div><ul><li><div>Android 최소버전 7.0으로 지정 : AR을 사용할 수 있는 최소한의 버전이다</div></li></ul><div><img src="ARFoundationTutorial_files/Image [3].png" type="image/png" data-filename="Image.png" width="878"/><br/></div><ul><li><div>ARM 선택 : ARM 외의 아키텍쳐는 지원하지 않는다</div></li></ul><div><img src="ARFoundationTutorial_files/Image [4].png" type="image/png" data-filename="Image.png" width="879"/><br/></div><ul><li><div>패키지이름 설정 : com.corona.artrack 형식으로 패키지이름 도 세팅해준다</div></li></ul><div>1-2. Window &gt; Package Manager</div><div>AR Foundation 패키지를 다운받는다</div><ul><li><div><img src="ARFoundationTutorial_files/Image [5].png" type="image/png" data-filename="Image.png" width="303"/></div></li></ul><div>위 두 패키지를 다운받으면 된다. ( 아이폰의 경우 ARKit Plugin을 다운받으면 된다. )</div><div><br/></div><ul><li><div>주의 : 절대 다른 버전을 다운받지 않는다 ( AR Foundation 은 아직 불안정하다. 다른 실험적인 버전은 다운받지 않는다. )</div></li><li><div>주의 : Unity 또한 프리뷰 버전은 받지 않는다. 현재 AR 커뮤니티에서 가장 안정적인 버전은 2019.1.10.f1 이다. ( 실험적인 마음으로 alpha 버전을 다운받게 되면 새로운 느낌의 버그를 느껴볼 수 있을 것이다. )</div></li></ul><div><br/></div><div>1-3. File &gt; Build Setting</div><div>화면 세팅을 하기위해 안드로이드로 설정을 변경한다.</div></div><div>Switch Platform 버튼을 눌러 플랫폼을 변경한다. ( 버튼이 안보이면 이미 지정된 것이므로 굳이 찾을필요 없다. )</div><div><img src="ARFoundationTutorial_files/Image [6].png" type="image/png" data-filename="Image.png" width="619"/><br/></div><div><br/></div><div>게임 화면의 좌측 상단에 Portrait로 입력된 부분을 클릭한다.</div><div>화면사이즈를 1920x1080으로 변경한다. ( 기본 세팅은 PC 환경에 맞게 설정되어 있어 핸드폰에 맞도록 변경한다 )</div><div><br/></div><div><img src="ARFoundationTutorial_files/Image [7].png" type="image/png" data-filename="Image.png" width="896"/><br/></div><div><br/></div><ol start="2"><li><div><span style="font-weight: bold;">AR 세션 생성</span></div></li></ol><div>AR Session, AR Session Origin을 Hierachy에서 마우스 우클릭을 눌러 생성한다.</div><div>Hierachy에서 마우스 우클릭 &gt; XR &gt; AR Session, AR Session Origin 둘다 생성</div><div><br/></div><div><img src="ARFoundationTutorial_files/Image [8].png" type="image/png" data-filename="Image.png" width="300"/><br/></div><div><br/></div><div>위와 같이 Hierachy가 구성될 것이다.</div><div><span style="font-weight: bold;">만약 Main Camera가있다면 삭제해주자.</span></div><div>왜냐하면 AR Session Origin에 Camera가 포함되어 있다.</div><div><br/></div><div><img src="ARFoundationTutorial_files/Image [9].png" type="image/png" data-filename="Image.png" width="297"/><br/></div><div><br/></div><div>위와같이 AR Camera를 클릭한다</div><div><br/></div><div><img src="ARFoundationTutorial_files/Image [10].png" type="image/png" data-filename="Image.png" width="383"/><br/></div><div><br/></div><div>Inspector의 Tag를 MainCamera로 바꿔준다. ( AR Camera를 MainCamera로 인식되도록 해주는 작업이다 )</div><div><br/></div><ol start="3"><li><div><span style="font-weight: bold;">AR TrackImage 설정</span></div></li></ol><div>3-1. AR Session Origin에 아래 컴포넌트를 추가한다</div><div><img src="ARFoundationTutorial_files/Image [11].png" type="image/png" data-filename="Image.png" width="389"/><br/></div><div><br/></div><div>3-2. Track할 이미지 리스트를 만든다</div><ul><li><div>프로젝트뷰에서 Asset &gt; 04. Images 디렉토리를 생성한다</div></li></ul><div><img src="ARFoundationTutorial_files/Image [12].png" type="image/png" data-filename="Image.png" width="345"/><br/></div><div><br/></div><ul><li><div>04. Images 디렉토리를 우클릭 후 &gt; XR &gt; ReferenceImageLibrary를 생성한다</div></li><li><div> 인터넷에서 라프라스를 검색하여 이미지를 다운받은 후 04. Images 폴더 안에 넣는다. ( 필자는 사심이 들어가 있지 않다. 적당한 이미지여서 골랐을뿐. 라프라스 이미지가 좋지만 다른 이미지를 사용해도 문제가 되진 않는다. 하지만 라프라스 이미지를 추천한다. )</div></li></ul><div><img src="ARFoundationTutorial_files/Lapras.jpg" type="image/jpeg" data-filename="Lapras.jpg" width="800"/><br/></div><div><br/></div><ul><li><div>ReferenceImageLibrary에서 Add Image 클릭 &gt; Select를 클릭하여 라프라스 이미지를 넣는다.</div></li></ul><div>아래 이미지 에서는 Specify Size를 넣지 않았으나, Specify Size를 설정하여 현실세계의 크기를 지정할 수 있다.</div><div><img src="ARFoundationTutorial_files/Image [13].png" type="image/png" data-filename="Image.png" width="390"/><br/></div><div><br/></div><ul><li><div>이제 AR Session Origin에다가 우리가 만든 ReferenceImageLibrary를 끌어다 놓는다. 물론 Reference Library 란에다가 넣어줘야 된다.</div></li></ul><div><img src="ARFoundationTutorial_files/Image [14].png" type="image/png" data-filename="Image.png" width="1027"/><br/></div><div><br/></div><div><span style="font-weight: bold;">3-3. Track한 이미지를 대체할 3D 오브젝트를 만든다</span></div><ul><li><div>Hierachy에서 마우스 우클릭 &gt; Create Empty</div></li></ul><div>비어있는 게임 오브젝트를 생성한다.</div><div><br/></div><ul><li><div>이름을 ReplacePrefab으로 지정한다</div></li></ul><div><img src="ARFoundationTutorial_files/Image [15].png" type="image/png" data-filename="Image.png" width="293"/><br/></div><div><br/></div><ul><li><div>ReplacePrefab 우클릭 &gt; CreateEmpty</div></li><li><div>ReplacePrefab&gt;CreateEmpty 우클릭 &gt; 3D Object Plane</div></li></ul><div>            -&gt; Inspector에서 Mesh Collider 삭제 ( 콜라이더 사용을 안할 것이므로 )</div><div>            -&gt; 매터리얼 지정, 만든 매터리얼을 Inspector에 끌어다 놓으면 된다.  (아래 매터리얼 만들기 참조)</div><ul><li><div>Inspector의 옵션은 Rotation, Scale 부분을 동일하게 맞추면 된다.</div></li></ul><div><img src="ARFoundationTutorial_files/Image [16].png" type="image/png" data-filename="Image.png" width="1024"/><br/></div><div><br/></div><ul><li><div>매터리얼 만들기</div></li></ul><div>-&gt; 프로젝트에서 02. Material 디렉토리 생성</div><div>-&gt; 디렉토리에서 마우스 우클릭 &gt; Create &gt; Material</div><div>-&gt; Shader 지정 : Mobile / Diffuse</div><div>-&gt; texture 지정 : 아무 이미지나 다운받아 올린다. 필자가 설정한 이미지는 NormalImage.jpg를 넣어놨다.</div><div><span style="color: rgb(255, 0, 0);">-&gt; 이미지는 미리 3~4개정도 Images 디렉토리에 넣어놓는다. (추후사용)</span></div><div><img src="ARFoundationTutorial_files/Image [17].png" type="image/png" data-filename="Image.png" width="729"/><br/></div><div><br/></div><ul><li><div>ReplacePrefab 우클릭 &gt; UI &gt; Canvas</div></li></ul><div>캔버스를 생성한다. Event System 오브젝트는 자동 생성되는 오브젝트 이므로 절대 삭제하지 않는다. (Canvas의 이벤트를 관리하는 오브젝트)</div><div>아래 설정을 참조한다.</div><div>Rotation : 90, Dynamic Pixels Per Unit : 15000 을 꼭 적용해야된다.</div><div><img src="ARFoundationTutorial_files/Image [18].png" type="image/png" data-filename="Image.png" width="385"/><br/></div><div><br/></div><ul><li><div>Canvas 우클릭 &gt; UI &gt; Text</div></li></ul><div>캔버스 밑에 텍스트를 생성한다. 이제 게임 화면을 보면 텍스트가 희미하게 보일 것이다.</div><div>Inspector에서 텍스트의 설정을 이미지와 같이 입력한다.</div><div><img src="ARFoundationTutorial_files/Image [19].png" type="image/png" data-filename="Image.png" width="389"/><br/></div><div><br/></div><div>여기서 Anchors 옵션이 매우 중요한데, 관련된 내용은 Unity 문서를 참조하길 바란다.</div><div><br/></div><ul><li><div>이제 우리가 만든 GameObject인 ReplacePrefab을 프로젝트로 옮긴다.</div></li></ul><div>필자의 경우 03. Prefab 디렉토리를 만든 후 거기에 넣었다.</div><div>이렇게 하면 GameObject는 Prefab이 되어 프로젝트에 저장된다.</div><div>Hierarchy에 있는 ReplacePrefab은 삭제한다.</div><div><img src="ARFoundationTutorial_files/Image [20].png" type="image/png" data-filename="Image.png" width="644"/><br/></div><div><br/></div><div>이제 만들어진 Prefab을 더블클릭하여 열어보면 아래와 같이 보일 것이다. (필자의 경우 Anchor 옵션을 왼쪽위로가게 했기 때문에 텍스트가 왼쪽위에있다.)</div><div><img src="ARFoundationTutorial_files/Image [21].png" type="image/png" data-filename="Image.png" width="892"/><br/></div><div><br/></div><div><br/></div><div>3-4. ReplacePrefab을 AR Session Origin&gt;AR Tracked Image Manager에 연결한다.</div><div>Tracked Image Prefab은 에 연결시키면 된다.</div><div><img src="ARFoundationTutorial_files/Image [22].png" type="image/png" data-filename="Image.png" width="735"/><br/></div><div><br/></div><ol start="4"><li><div><span style="font-weight: bold;">이미지를 컨트롤할 스크립트를 작성한다</span></div></li></ol><ul><li><div>자 이제 즐거운 코딩의 시간이다.</div></li><li><div>Project에서 01. Scripts 디렉토리를 만든다.</div></li><li><div>마우스 우클릭 후 C# Script를 생성하고, 이름을 ImageManager로 지정한다.</div></li></ul><div><br/></div><div>4-1. using</div><div>소스코드에 아래 3가지 패키지를 임포트한다</div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">using</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">UnityEngine.XR.ARFoundation;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">using</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">UnityEngine.XR.ARSubsystems;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">using</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">UnityEngine.UI;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">4-2. 변수선언</span></div><div style="min-height: 11pt; text-align: left;">해당 소스코드에서 사용할 변수를 선언한다</div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">Camera _camera;</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 카메라</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">ARTrackedImageManager _arTrackedImageManager;  </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 이미지 트래킹 매니저( 우리가 넣어놓은 이미지가 트래킹되면, 이벤트에서 ReplacePrefab을 리턴해준다 )</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">[SerializeField] List&lt;Texture&gt; _texture;   </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 보여줄 텍스쳐 리스트( SerializeField 지정을 하면 에디터에서 값을 넣을 수 있다 )</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">float</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">_time = 0;                           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 타이머</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">4-3. 변수초기화</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">// Awake의 경우 프레임이 작동하기 전에 실행되므로 초기화 할 경우 사용하면 좋다. ( Start 보다 먼저 작동한다 )</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">private</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">void</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">Awake</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">()</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// AR Camera를 가져온다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        _camera = transform.GetComponentInChildren&lt;Camera&gt;();</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 프레임이 작동하기전에 미리 ARTrackedImageManager 컴포넌트를 초기화한다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        _arTrackedImageManager = GetComponent&lt;ARTrackedImageManager&gt;();</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">4-4. GameObject 활성화 비활성화시 이벤트 함수를 지정해준다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// GameObject가 활성화 될때 작동한다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">   </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">private</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">void</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">OnEnable</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">()</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// OnTrackedImagesChanged 함수를 _arTrackedImageManager.trackedImagesChanged 변수에 람다형식으로 더한다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// trackedImagesChanged 는 트래킹하는 이미지가 변경될 경우 발생하는 이벤트 함수이다. C언어의 Function 변수와, Java의 람다식과 같은 기능으로 보면 된다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 그러므로 해당 소스코드는 트래킹하는 이미지가 변경될 경우 OnTrackedImagesChanged 함수를 호출하도록 해주는 코드로 보면 된다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        _arTrackedImageManager.trackedImagesChanged += OnTrackedImagesChanged;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">   </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// GameObject가 비활성화 될때 작동한다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">   </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">private</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">void</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">OnDisable</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">()</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// OnTrackedImagesChanged 함수를 _arTrackedImageManager.trackedImagesChanged 변수에서 뺀다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        _arTrackedImageManager.trackedImagesChanged -= OnTrackedImagesChanged;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-weight: bold; font-family: DotumChe;">4-5. </span><span style="min-height: 11pt; font-size: 9pt; font-weight: bold; font-family: DotumChe;">OnTrackedImagesChanged 함수를 만든다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">위에서 trackedImagesChanged += </span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">OnTrackedImagesChanged 로 지정해 주었으므로,</span></div><div style="min-height: 11pt; text-align: left;">ARTrackedImageManager에서 탐색된 이미지가 변경될 때마다 <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">trackedImagesChanged를 호출해 줄 것이고,</span></div><div style="min-height: 11pt; text-align: left;">이는 대입된 함수인 <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">OnTrackedImagesChanged 함수를 호출해 줄 것이다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">OnTrackedImagesChanged 함수를 정의한다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">void</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">OnTrackedImagesChanged(ARTrackedImagesChangedEventArgs eventArgs)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">foreach</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">(var trackedImage</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">in</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">eventArgs.added)    // </span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">eventArgs.added는 추가로 트래킹된 이미지 리스트 이다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// Give the initial image a reasonable default scale</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            trackedImage.transform.localScale =</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">new</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">Vector3(0.01f, 1f, 0.01f);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            UpdateInfo(trackedImage);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">foreach</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">(var trackedImage</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">in</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">eventArgs.updated)    // </span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">eventArgs.updated는 변경된 트래킹 이미지 리스트 이다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            UpdateInfo(trackedImage);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    }</span></div><div style="min-height: 11pt; text-align: left;"><br/></div><div style="min-height: 11pt; text-align: left;"><span style="font-weight: bold;">4-6. UpdateInfo 함수를 작성한다</span></div><div style="min-height: 11pt; text-align: left;">우리가 이전에 만들었던 ReplacePrefab이 파라미터로 들어오면,</div><div style="min-height: 11pt; text-align: left;">여기서  CANVAS의 카메라를  AR 카메라로 변경시켜,</div><div style="min-height: 11pt; text-align: left;">CAVAS의 텍스트가 카메라로 보이게 만든다.</div><div style="min-height: 11pt; text-align: left;"><br/></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">void</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">UpdateInfo(ARTrackedImage trackedImage)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">    {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// CAVAS의 카메라를 AR 카메라로 변경한다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">var</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">canvas = trackedImage.GetComponentInChildren&lt;Canvas&gt;();</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        canvas.worldCamera = _camera;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 우리가 만든 Prefab의 텍스트, 이미지를 가져온다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">var</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">text = canvas.GetComponentInChildren&lt;Text&gt;();</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">var</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">planeParent = trackedImage.transform.GetChild(0).gameObject;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">var</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">plane = planeParent.transform.GetChild(0).gameObject;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 트래킹된 상태이면 아래 내용을 진행한다</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 타이머를 작동시키고, 시간에따라 텍스트,텍스처(이미지)를 변경시킨다.</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">if</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">(trackedImage.trackingState != TrackingState.None)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            _time += Time.deltaTime;    <span style="font-family: DotumChe; font-size: 9pt; color: rgb(255, 0, 0);">// 델타타입은 1초/프레임수를 의미한다. 그러므로 +=을 할경우 경과된 시간을 의미한다 (10fps일경우 0.1초)</span></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            plane.SetActive(</span><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">true</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// The image extents is only valid when the image is being tracked</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            trackedImage.transform.localScale =</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">new</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">Vector3(trackedImage.size.x, 1f, trackedImage.size.y);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 텍스쳐 설정</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">var</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">material = plane.GetComponent&lt;MeshRenderer&gt;().material;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        </span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 5초동안</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">if</span> <span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">( _time &lt; 5.0f)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                text.text =</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">string</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">.Format(</span><span style="min-height: 11pt; font-size: 9pt; color: rgb(163, 21, 21); font-family: DotumChe;">&quot;라프라스를 소개합니다.&quot;</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                material.mainTexture = _texture[0];</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 10초동안</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">else</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">if</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">( _time &lt; 10.0f )</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                material.mainTexture = _texture[1];</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                text.text =</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">string</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">.Format(</span><span style="min-height: 11pt; font-size: 9pt; color: rgb(163, 21, 21); font-family: DotumChe;">&quot;라프라스는 큽니다.&quot;</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 15초동안</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">else</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">if</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">( _time &lt; 15.0f )</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                material.mainTexture = _texture[2];</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                text.text =</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">string</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">.Format(</span><span style="min-height: 11pt; font-size: 9pt; color: rgb(163, 21, 21); font-family: DotumChe;">&quot;라프라스는 물에삽니다.&quot;</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 128, 0); font-family: DotumChe;">// 그이후 초기화</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">           </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">else</span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">if</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">( _time &gt;= 15.0f )</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">                _time = 0.0f;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">       </span> <span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">else</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">            plane.SetActive(</span><span style="min-height: 11pt; font-size: 9pt; color: rgb(0, 0, 255); font-family: DotumChe;">false</span><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt; font-family: DotumChe;">        }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9pt;"><br/></span></div><ol start="5"><li><div style="min-height: 11pt; text-align: left;"><span style="font-weight: bold;">스크립트 및 텍스처 연결</span></div></li></ol><div>5.1 ImageManger 스크립트를 AR Session Origin에 드래그앤 드롭한다</div><div><img src="ARFoundationTutorial_files/Image [23].png" type="image/png" data-filename="Image.png" width="1026"/><br/></div><div>5.2 Inspector의 ImageManger를 보면 Texture 가 있다.</div><div>텍스처를 3개 넣을 것이므로 Size를 3으로 하고, 각 이미지들을 드래그앤 드롭으로 넣는다.</div><div><br/></div><ol start="6"><li><div><span style="font-weight: bold;">빌드</span></div></li></ol><div>6-1. File &gt; BuildSettings 를 연다.</div><div>6-2. Run Device를 확인하고 Build And Run을 클릭한다.</div><div><img src="ARFoundationTutorial_files/Image [24].png" type="image/png" data-filename="Image.png" width="636"/><br/></div><div><br/></div><ul><li><div>Run Device에 자신의 기기가 보이지 않는다면, 핸드폰 제조사 홈페이지에 가서 USB 드라이버를 다운받아 설치한다.</div></li></ul><div><br/></div></div><div><br/></div><div></div></span>
</div></body></html> 